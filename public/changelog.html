<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro de Cambios - Trefa Autos</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Be Vietnam Pro', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #0B2540 0%, #1a3a5c 100%);
            color: #333;
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #FF6801 0%, #ff8533 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.95;
        }

        .content {
            padding: 40px;
        }

        .version {
            margin-bottom: 50px;
            border-left: 4px solid #FF6801;
            padding-left: 30px;
        }

        .version-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .version-number {
            font-size: 1.8em;
            font-weight: 700;
            color: #0B2540;
        }

        .version-date {
            background: #f5f5f5;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            color: #666;
        }

        .change-category {
            margin-bottom: 25px;
        }

        .category-title {
            font-size: 1.2em;
            font-weight: 600;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.75em;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .badge-fix {
            background: #d4edda;
            color: #155724;
        }

        .badge-feature {
            background: #d1ecf1;
            color: #0c5460;
        }

        .badge-improvement {
            background: #fff3cd;
            color: #856404;
        }

        .badge-pending {
            background: #f8d7da;
            color: #721c24;
        }

        .change-list {
            list-style: none;
            margin-left: 0;
        }

        .change-item {
            padding: 12px 0;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }

        .change-item:last-child {
            border-bottom: none;
        }

        .change-icon {
            flex-shrink: 0;
            width: 24px;
            height: 24px;
            background: transparent;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color:#FF6801;
            border: 2px solid #FF6801;
            border-color: #FF6801;
            font-size: 0.8em;
            margin-top: 2px;
        }

        .change-text {
            flex: 1;
        }

        .change-description {
            color: #666;
            font-size: 0.95em;
            margin-top: 5px;
        }

        .commit-hash {
            font-family: 'Courier New', monospace;
            background: #f5f5f5;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.85em;
            color: #666;
            margin-left: 8px;
        }

        .footer {
            background: #f8f9fa;
            padding: 30px 40px;
            text-align: center;
            color: #666;
            font-size: 0.9em;
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            .header h1 {
                font-size: 1.8em;
            }

            .content {
                padding: 25px;
            }

            .version {
                padding-left: 20px;
            }

            .version-header {
                flex-direction: column;
                align-items: flex-start;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìù Registro de Cambios</h1>
            <p>Autos TREFA - Historial de Actualizaciones</p>
            <p style="font-size: 0.9em; margin-top: 5px; opacity: 0.9;">trefa.mx</p>
        </div>

        <div class="content">
            <!-- Version Actual -->
            <div class="version">
                <div class="version-header">
                    <span class="version-number">v1.3.0</span>
                    <span class="version-date">25 de Octubre, 2025</span>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-fix">Correcci√≥n</span>
                        <span>Autenticaci√≥n con Intelimotor</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üîê</div>
                            <div class="change-text">
                                <strong>Corregido error 401 al obtener valuaciones de autos</strong>
                                <span class="commit-hash">1b6bfbd</span>
                                <p class="change-description">
                                    Se solucion√≥ el error "Error de autenticaci√≥n con Intelimotor (401)" que imped√≠a obtener valuaciones de veh√≠culos. La API de Intelimotor requiere que las credenciales (API Key y API Secret) se env√≠en como par√°metros en la URL, no como headers. El proxy ahora extrae las credenciales de los headers y las agrega correctamente a la URL como query parameters (?apiKey=...&apiSecret=...).
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-improvement">Mejora</span>
                        <span>Estandarizaci√≥n de Filtros y Categor√≠as</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üè∑Ô∏è</div>
                            <div class="change-text">
                                <strong>Estandarizados nombres de campos de filtros</strong>
                                <span class="commit-hash">221fdf6</span>
                                <p class="change-description">
                                    Se uniformaron los nombres de los campos de filtros para mejorar la consistencia: 'marcas' ‚Üí 'marca', 'promotion' ‚Üí 'promociones', 'ano' ‚Üí 'autoano'. Tambi√©n se actualizaron las im√°genes de categor√≠as: 'sed√°n' ‚Üí 'sedan' (sin acento), se agreg√≥ imagen de Ducati para motos, y se reemplaz√≥ motos-filter.png con motocicleta-filter.png.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-improvement">Mejora</span>
                        <span>Infraestructura y Rendimiento</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">‚ö°</div>
                            <div class="change-text">
                                <strong>Incrementados recursos de Cloud Run para mejor rendimiento</strong>
                                <span class="commit-hash">37c9b65</span>
                                <p class="change-description">
                                    Se aumentaron los recursos del servidor en producci√≥n: memoria de 512Mi ‚Üí 2Gi (4x m√°s memoria) y CPU de 1 ‚Üí 4 cores. Esto mejora significativamente la velocidad de carga de p√°ginas, procesamiento de im√°genes, y capacidad para manejar m√∫ltiples usuarios simult√°neos.
                                </p>
                            </div>
                        </li>
                        <li class="change-item">
                            <div class="change-icon">üè∑Ô∏è</div>
                            <div class="change-text">
                                <strong>Mejorado el display de versi√≥n en el footer</strong>
                                <span class="commit-hash">37c9b65</span>
                                <p class="change-description">
                                    El footer ahora muestra el hash del commit de Git en lugar de "versi√≥n dev", facilitando el rastreo de cu√°l versi√≥n exacta del c√≥digo est√° desplegada en producci√≥n. Ejemplo: "v1.3.0 ‚Ä¢ 1b6bfbd".
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-fix">Correcci√≥n</span>
                        <span>Creaci√≥n de Usuarios</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üë§</div>
                            <div class="change-text">
                                <strong>Corregido error "Database error saving new user" al registrarse</strong>
                                <span class="commit-hash">SQL fix</span>
                                <p class="change-description">
                                    Se simplific√≥ el trigger de creaci√≥n de perfiles de usuario (handle_new_user) para prevenir errores al crear nuevas cuentas. La funci√≥n ahora solo inserta los campos esenciales (id, email, role) y evita fallos al intentar procesar campos opcionales. Los usuarios ya pueden registrarse sin problemas.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-improvement">Mejora</span>
                        <span>Formulario de Solicitud de Cr√©dito</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üìù</div>
                            <div class="change-text">
                                <strong>Simplificado flujo de solicitud - campos de direcci√≥n ahora opcionales</strong>
                                <span class="commit-hash">0ccd25e</span>
                                <p class="change-description">
                                    El formulario de solicitud de cr√©dito ya no requiere que llenes los campos de direcci√≥n (calle, colonia, ciudad, estado, c√≥digo postal) para avanzar. Ahora solo se requieren 3 campos obligatorios: tipo de vivienda, grado de estudios y n√∫mero de dependientes. Esto mejora significativamente la experiencia del usuario y permite completar las solicitudes m√°s r√°pido.
                                </p>
                            </div>
                        </li>
                        <li class="change-item">
                            <div class="change-icon">üîó</div>
                            <div class="change-text">
                                <strong>Agregada ruta /escritorio/solicitudes para acceso directo</strong>
                                <span class="commit-hash">0ccd25e</span>
                                <p class="change-description">
                                    Los enlaces en los correos electr√≥nicos que reciben los clientes ahora funcionan correctamente. Se agreg√≥ la ruta /escritorio/solicitudes que lleva directamente a la p√°gina donde pueden ver todas sus solicitudes de cr√©dito enviadas.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-fix">Correcci√≥n</span>
                        <span>API de CarStudio</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üîß</div>
                            <div class="change-text">
                                <strong>Solucionado problema con la herramienta de edici√≥n de fotos</strong>
                                <span class="commit-hash">a47cf26</span>
                                <span class="commit-hash">0bf995e</span>
                                <p class="change-description">
                                    La integraci√≥n con CarStudio (herramienta para mejorar fotos de autos) ahora funciona correctamente. El sistema mostraba un error de autorizaci√≥n que imped√≠a procesar las im√°genes. Se realizaron dos correcciones: primero se actualiz√≥ el formato de seguridad que CarStudio espera, y segundo se corrigi√≥ la forma en que el sistema se comunica con el servidor de CarStudio para enviar las fotos.
                                </p>
                            </div>
                        </li>
                        <li class="change-item">
                            <div class="change-icon">ü§ñ</div>
                            <div class="change-text">
                                <strong>Mejorado manejo de errores cuando la IA de CarStudio no puede procesar im√°genes</strong>
                                <span class="commit-hash">ce04ae5</span>
                                <p class="change-description">
                                    Ahora el sistema detecta correctamente cuando la inteligencia artificial de CarStudio no puede procesar una imagen (por ejemplo, si la imagen no contiene un veh√≠culo claramente visible, el fondo es muy complejo, o la calidad es muy baja). Antes solo mostraba "Error desconocido", ahora muestra mensajes claros explicando qu√© sali√≥ mal y sugiere c√≥mo resolverlo (usar im√°genes m√°s claras, con fondos simples, mejor calidad, etc.).
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-fix">Correcci√≥n</span>
                        <span>Configuraci√≥n de Airtable</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üîê</div>
                            <div class="change-text">
                                <strong>Restaurados valores de respaldo para configuraci√≥n de Airtable</strong>
                                <span class="commit-hash">ffa319f</span>
                                <span class="commit-hash">09c9d94</span>
                                <p class="change-description">
                                    Se restauraron los valores de respaldo (fallbacks) para la configuraci√≥n de Airtable, garantizando que la herramienta de valuaci√≥n de autos ("Vende tu Auto") funcione correctamente incluso si las variables de entorno no est√°n configuradas durante el build. Esto previene el error "La configuraci√≥n de Airtable est√° incompleta" que aparec√≠a en producci√≥n.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-fix">Correcci√≥n</span>
                        <span>Autenticaci√≥n OTP</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üîê</div>
                            <div class="change-text">
                                <strong>Solucionado error al iniciar sesi√≥n con c√≥digo de 6 d√≠gitos</strong>
                                <span class="commit-hash">d63d85c</span>
                                <p class="change-description">
                                    Los usuarios ya pueden iniciar sesi√≥n correctamente usando el c√≥digo de 6 d√≠gitos que reciben por correo. Anteriormente aparec√≠a el mensaje "C√≥digo inv√°lido o expirado" incluso con c√≥digos v√°lidos. Se corrigi√≥ el proceso de validaci√≥n para que funcione sin problemas.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-fix">Correcci√≥n</span>
                        <span>Visualizaci√≥n de Documentos</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üìÑ</div>
                            <div class="change-text">
                                <strong>Solucionado problema para ver y descargar documentos de clientes</strong>
                                <span class="commit-hash">33cfb5a</span>
                                <p class="change-description">
                                    Ahora puedes ver y descargar correctamente los documentos que los clientes suben (INE, comprobante de domicilio, etc.) desde la p√°gina de Perfil del Cliente. Antes no se pod√≠an abrir y todos mostraban el mismo tama√±o de archivo. Tambi√©n se corrigi√≥ para que muestre el tama√±o real de cada documento.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-pending">Pendiente</span>
                        <span>Actualizaci√≥n de Estado de Solicitudes</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">‚ö†Ô∏è</div>
                            <div class="change-text">
                                <strong>Permisos para cambiar estado de solicitudes de cr√©dito</strong>
                                <p class="change-description">
                                    <strong>Acci√≥n requerida por el equipo de sistemas:</strong> Actualmente los asesores y administradores no pueden cambiar el estado de las solicitudes de cr√©dito desde el perfil del cliente (por ejemplo, cambiar de "En Revisi√≥n" a "Aprobada"). Se necesita actualizar los permisos en la base de datos ejecutando el siguiente c√≥digo:
                                    <br><br>
                                    <code style="display: block; background: #f5f5f5; padding: 15px; border-radius: 8px; font-size: 0.9em; white-space: pre-wrap; margin-top: 10px;">DROP POLICY IF EXISTS "financing_apps_update" ON public.financing_applications;

CREATE POLICY "financing_apps_update" ON public.financing_applications
FOR UPDATE TO authenticated
USING (
  user_id = auth.uid() OR
  get_my_role() IN ('admin', 'sales')
)
WITH CHECK (
  user_id = auth.uid() OR
  get_my_role() IN ('admin', 'sales')
);</code>
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Versi√≥n 1.1.0 -->
            <div class="version">
                <div class="version-header">
                    <span class="version-number">v1.1.0</span>
                    <span class="version-date">23 de Octubre, 2025</span>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-feature">Nueva Funci√≥n</span>
                        <span>Panel de Ventas para Asesores</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üìä</div>
                            <div class="change-text">
                                <strong>Dashboard completo para gestionar clientes asignados</strong>
                                <p class="change-description">
                                    Los asesores de ventas ahora tienen acceso a un panel personalizado en /escritorio/ventas/leads donde pueden ver todos sus clientes asignados. El panel muestra un resumen con estad√≠sticas en tiempo real, incluyendo n√∫mero de clientes, solicitudes pendientes y clientes contactados. Pueden buscar y filtrar clientes, ver sus perfiles completos, gestionar tags y recordatorios, y sincronizar autom√°ticamente con el CRM Kommo. El sistema est√° completamente protegido con permisos de seguridad - cada asesor solo ve sus propios clientes asignados.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-fix">Correcci√≥n</span>
                        <span>Servidor de Procesamiento de autos</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üåê</div>
                            <div class="change-text">
                                <strong>Solucionado error de CORS que bloqueaba la carga de autos</strong>
                                <p class="change-description">
                                    El servidor de procesamiento de autos (rapid-processor) no estaba permitiendo solicitudes desde nuestro dominio de staging. Se agregaron los encabezados CORS correctos y el manejador de preflight, permitiendo que la lista de autos se cargue correctamente en todas las pruebas de staging.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-fix">Correcci√≥n</span>
                        <span>Guardado de Perfil Bancario</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üè¶</div>
                            <div class="change-text">
                                <strong>Solucionado error que imped√≠a guardar el perfil bancario del cliente</strong>
                                <p class="change-description">
                                    El sistema mostraba error "no tiene campo uid" cuando los clientes intentaban guardar su informaci√≥n bancaria. El problema era una funci√≥n de base de datos que buscaba una columna con nombre incorrecto. Se corrigi√≥ la funci√≥n para usar el nombre de columna correcto (user_id), permitiendo que los clientes completen exitosamente su perfilamiento bancario y reciban recomendaciones de instituciones financieras.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-fix">Correcci√≥n</span>
                        <span>Creaci√≥n de Solicitudes de Financiamiento</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üìã</div>
                            <div class="change-text">
                                <strong>Solucionado error 403 que imped√≠a crear nuevas solicitudes de cr√©dito</strong>
                                <p class="change-description">
                                    Los clientes recib√≠an un error "Forbidden" (403) cuando intentaban crear una nueva solicitud de financiamiento. El error ocurr√≠a porque la misma funci√≥n que guardaba el perfil bancario no estaba asignando correctamente el ID del usuario a las nuevas solicitudes. Con la correcci√≥n anterior (user_id), este problema se resolvi√≥ autom√°ticamente, permitiendo que los clientes completen todo su flujo de solicitud de cr√©dito sin interrupciones.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-feature">Nueva Funci√≥n</span>
                        <span>Integraci√≥n con Airtable como Sistema de Respaldo</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üîÑ</div>
                            <div class="change-text">
                                <strong>Sistema robusto de 4 niveles para cargar inventario de autos</strong>
                                <p class="change-description">
                                    Se implement√≥ un sistema de respaldo en cascada para garantizar que el inventario de autos siempre est√° disponible. El sistema intenta cargar desde: (1) smooth-handler, (2) cache de inventario, (3) cache normalizado, y finalmente (4) directamente desde Airtable. Esto significa que incluso si algunos servidores fallan o est√°n lentos, la aplicaci√≥n siempre conseguir√° mostrar los autos desde Airtable como √∫ltimo recurso. El sistema es inteligente y cachea los datos en el navegador para que las cargas posteriores sean m√°s r√°pidas.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-improvement">Mejora</span>
                        <span>Slugs de autos Mejorados</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üîó</div>
                            <div class="change-text">
                                <strong>Los URLs de autos ahora usan n√∫meros de orden m√°s legibles</strong>
                                <p class="change-description">
                                    Antes los autos ten√≠an URLs confusas. Ahora, cuando entras a ver un auto, el URL incluye el n√∫mero de orden del auto (por ejemplo: /autos/honda-civic-id123456) en lugar de IDs t√©cnicos. Esto hace los enlaces m√°s f√°ciles de compartir, m√°s legibles y mejores para SEO. El sistema todav√≠a puede encontrar autos usando m√∫ltiples formas de identificaci√≥n como respaldo.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Versi√≥n 1.0.0 - Lanzamiento Beta -->
            <div class="version">
                <div class="version-header">
                    <span class="version-number">v1.0.0</span>
                    <span class="version-date">15 de Octubre, 2025</span>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-feature">Nueva Funci√≥n</span>
                        <span>Lanzamiento Beta de Portal Digital TREFA</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üöÄ</div>
                            <div class="change-text">
                                <strong>Plataforma completa de compra-venta y financiamiento de autos</strong>
                                <p class="change-description">
                                    Se lanz√≥ la versi√≥n beta del Portal Digital TREFA, una plataforma revolucionaria que permite a los clientes comprar, vender y financiar autos seminuevos 100% en l√≠nea. El proyecto integra 1600+ horas de desarrollo con tecnolog√≠as modernas (React, TypeScript, Supabase, etc.) e integraciones con m√∫ltiples servicios externos (WordPress, Airtable, Intelimotor, Car Studio AI, Google Analytics, etc.).
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-feature">Nueva Funci√≥n</span>
                        <span>Sistema de Autenticaci√≥n Digital</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üîê</div>
                            <div class="change-text">
                                <strong>Inicio de sesi√≥n seguro sin contrase√±a usando c√≥digos OTP por correo</strong>
                                <p class="change-description">
                                    Los usuarios pueden registrarse e iniciar sesi√≥n de forma segura y f√°cil usando un c√≥digo de 6 d√≠gitos enviado a su correo, eliminando la necesidad de recordar contrase√±as. Tambi√©n se soporta autenticaci√≥n con Google y Facebook para acceso r√°pido. El sistema maneja autom√°ticamente la recuperaci√≥n de contrase√±a y preserva la intenci√≥n del usuario (si intentaba financiar un auto espec√≠fico, lo lleva all√≠ despu√©s de registrarse).
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-feature">Nueva Funci√≥n</span>
                        <span>Cat√°logo de autos con Filtros Avanzados</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üöó</div>
                            <div class="change-text">
                                <strong>Exploraci√≥n inteligente del inventario con b√∫squeda y filtros</strong>
                                <p class="change-description">
                                    Los clientes pueden explorar m√°s de 70 autos seminuevos con b√∫squeda avanzada y filtros por marca, modelo, a√±o, rango de precio, cuotas disponibles, promociones y ubicaci√≥n. La p√°gina de detalles del auto muestra galer√≠as de fotos en alta resoluci√≥n, videos, especificaciones t√©cnicas, reporte de inspecci√≥n de 150 puntos, calculadora de financiamiento interactiva, y opciones para compartir o guardar el auto.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-feature">Nueva Funci√≥n</span>
                        <span>Sistema de Favoritos y Comparaci√≥n</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">‚ù§Ô∏è</div>
                            <div class="change-text">
                                <strong>Guardar y comparar autos favoritos en tu perfil</strong>
                                <p class="change-description">
                                    Los usuarios registrados pueden guardar sus autos preferidos en su lista de favoritos, accesible desde su dashboard personal. Esta lista facilita la comparaci√≥n entre m√∫ltiples autos para tomar mejor decisi√≥n de compra.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-feature">Nueva Funci√≥n</span>
                        <span>Herramienta "Vende tu Auto"</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üí∞</div>
                            <div class="change-text">
                                <strong>Valuaci√≥n instant√°nea de autos usando inteligencia artificial</strong>
                                <p class="change-description">
                                    Clientes que quieren vender sus autos pueden usar la herramienta de valuaci√≥n en /quote-car. Simplemente describen su auto en lenguaje natural, el sistema lo identifica y proporciona una oferta de compra competitiva en segundos usando la API profesional de Intelimotor¬Æ. Si aceptan la oferta, pueden agendar una inspecci√≥n directamente por WhatsApp.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-feature">Nueva Funci√≥n</span>
                        <span>Solicitud de Financiamiento Digital Multietapa</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üìù</div>
                            <div class="change-text">
                                <strong>Formulario completo para solicitar financiamiento de autos</strong>
                                <p class="change-description">
                                    Usuarios registrados pueden completar una solicitud de financiamiento completa en la p√°gina /aplicacion. El formulario est√° pre-llenado con la informaci√≥n del perfil, puede auto-seleccionar el auto si vienes desde una p√°gina espec√≠fica, permite cargar documentos requeridos (INE, comprobante de domicilio, etc.) con una interfaz intuitiva de arrastrar-soltar, y guarda la solicitud de forma segura en la base de datos. Los clientes ven confirmaci√≥n de env√≠o y pueden hacer seguimiento del estado de su solicitud.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-feature">Nueva Funci√≥n</span>
                        <span>Perfilamiento Bancario Inteligente</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üè¶</div>
                            <div class="change-text">
                                <strong>Cuestionario que determina qu√© banco tiene m√°s probabilidades de aprobar tu cr√©dito</strong>
                                <p class="change-description">
                                    En la p√°gina /perfilacion-bancaria, el sistema hace preguntas inteligentes sobre la situaci√≥n financiera del cliente para determinar cu√°les instituciones bancarias tienen m√°s probabilidades de aprobar su solicitud de cr√©dito. El sistema usa esta informaci√≥n para optimizar recomendaciones bancarias posteriores, aumentando significativamente la tasa de aprobaci√≥n.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-feature">Nueva Funci√≥n</span>
                        <span>Dashboard de Usuario Personalizado</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üìà</div>
                            <div class="change-text">
                                <strong>Panel de control central para usuarios registrados</strong>
                                <p class="change-description">
                                    El dashboard en /escritorio es el centro de control para usuarios. Aqu√≠ ven un resumen de sus solicitudes activas, proyecciones financieras basadas en su perfil, recomendaciones personalizadas de autos que se ajustan a su presupuesto, y un sistema de gu√≠a que los dirige a completar los pasos necesarios (perfil ‚Üí perfilamiento ‚Üí solicitud) para poder aplicar a financiamiento.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-feature">Nueva Funci√≥n</span>
                        <span>Gesti√≥n de Perfil de Usuario</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üë§</div>
                            <div class="change-text">
                                <strong>P√°gina para actualizar informaci√≥n personal, fiscal y de contacto</strong>
                                <p class="change-description">
                                    En /profile, usuarios pueden actualizar su informaci√≥n personal, direcci√≥n, datos fiscales (nombre, apellido, RFC, CURP), tel√©fono y correo. El sistema calcula autom√°ticamente su RFC en tiempo real mientras escriben, proporcionando feedback inmediato y asegurando que los datos sean correctos antes de guardarlos.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-feature">Nueva Funci√≥n</span>
                        <span>Centro de Marketing para Administradores</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üõ†Ô∏è</div>
                            <div class="change-text">
                                <strong>Panel todo-en-uno para gestionar marketing digital y campa√±as</strong>
                                <p class="change-description">
                                    Los administradores acceden a /marketing para un control centralizado de todas las herramientas de marketing. Pueden habilitar/deshabilitar integraciones (Google Analytics, GTM, Facebook Pixel, etc.), crear eventos de seguimiento personalizados visualmente (sin escribir c√≥digo), generar URLs de campa√±a con UTMs autom√°ticamente, usar un generador de contenido con IA para crear art√≠culos y copys, depurar la API de Car Studio directamente, y ver anal√≠ticas simuladas de sesiones de usuarios.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-feature">Nueva Funci√≥n</span>
                        <span>Mejora de Fotos con Inteligencia Artificial</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üì∏</div>
                            <div class="change-text">
                                <strong>Integraci√≥n con Car Studio AI para procesar y mejorar fotos de autos</strong>
                                <p class="change-description">
                                    El sistema se conecta a la API de Car Studio para mejorar autom√°ticamente las fotos de autos con fondos de calidad profesional y mejor procesamiento de imagen. Las im√°genes procesadas se guardan tanto en el registro del auto como en un respaldo seguro en Supabase Storage para garantizar que nunca se pierdan.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-feature">Nueva Funci√≥n</span>
                        <span>P√°gina de Promociones</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üè∑Ô∏è</div>
                            <div class="change-text">
                                <strong>Secci√≥n dedicada a mostrar autos con ofertas especiales</strong>
                                <p class="change-description">
                                    En /promociones, los clientes ven todos los autos que actualmente tienen ofertas especiales o bonificaciones (descuentos, tasas preferenciales, etc.) con banners visuales destacados para cada promoci√≥n activa.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-feature">Nueva Funci√≥n</span>
                        <span>P√°gina de Preguntas Frecuentes</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">‚ùì</div>
                            <div class="change-text">
                                <strong>Secci√≥n de ayuda completa y categorizada</strong>
                                <p class="change-description">
                                    En /faq, los usuarios pueden encontrar respuestas a preguntas frecuentes sobre financiamiento, vender su auto, requisitos de documentos, etc. Las preguntas est√°n organizadas por categor√≠as con acordeones interactivos para f√°cil navegaci√≥n.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-feature">Nueva Funci√≥n</span>
                        <span>Landing Pages de Prueba A/B/C</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üé®</div>
                            <div class="change-text">
                                <strong>M√∫ltiples versiones de p√°gina de inicio para optimizar conversiones</strong>
                                <p class="change-description">
                                    El sistema incluye varias landing pages (/landing-b, /landing-c) con dise√±os diferentes para probar cu√°l versi√≥n convierte mejor. Todas incluyen sliders din√°micos de autos, secciones de captura de leads, narrativa de marca, garant√≠as y testimonios de clientes reales.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-feature">Nueva Funci√≥n</span>
                        <span>Integraci√≥n con CRM Kommo</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üîó</div>
                            <div class="change-text">
                                <strong>Sincronizaci√≥n autom√°tica de datos de clientes con sistema de CRM</strong>
                                <p class="change-description">
                                    Los datos de nuevas solicitudes y clientes se sincronizan autom√°ticamente con el CRM Kommo para que el equipo de ventas tenga informaci√≥n actualizada en tiempo real. Esto garantiza que no se pierda ning√∫n lead y facilita el seguimiento del embudo de ventas.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-fix">Correcci√≥n</span>
                        <span>Correcciones Iniciales de Bugs</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üêõ</div>
                            <div class="change-text">
                                <strong>Correcci√≥n del crash de la p√°gina de listado de autos</strong>
                                <p class="change-description">
                                    Se arregl√≥ un error que hac√≠a que la p√°gina de autos se fuera en blanco despu√©s de cargar. El problema era que los filtros no estaban calculados correctamente cuando el HTML se renderizaba. Se implementaron optimizaciones con React useMemo para calcular correctamente todos los conteos de filtros (marcas, a√±os, ubicaciones, clasificaciones) basados en los autos disponibles.
                                </p>
                            </div>
                        </li>
                        <li class="change-item">
                            <div class="change-icon">üîÑ</div>
                            <div class="change-text">
                                <strong>Solucionado bucle infinito de creaci√≥n de perfiles</strong>
                                <p class="change-description">
                                    El sistema estaba intentando crear perfiles de usuario indefinidamente cuando los usuarios se registraban, llenando la consola con errores. Se removi√≥ la l√≥gica de creaci√≥n de perfil desde el navegador y se implement√≥ una soluci√≥n con triggers de base de datos que crean perfiles autom√°ticamente cuando un usuario se registra, de forma m√°s eficiente y segura.
                                </p>
                            </div>
                        </li>
                        <li class="change-item">
                            <div class="change-icon">üñºÔ∏è</div>
                            <div class="change-text">
                                <strong>Correcci√≥n de normalizaci√≥n de im√°genes de autos</strong>
                                <p class="change-description">
                                    Las fotos de autos no se mostraban correctamente en el carrusel de la p√°gina de inicio y en las tarjetas del listado. Se arregl√≥ el c√≥digo que procesa las im√°genes para manejar correctamente diferentes formatos (texto, arrays de URLs, objetos de attachment) que vienen de diferentes fuentes de datos.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Versiones Anteriores -->
            <div class="version">
                <div class="version-header">
                    <span class="version-number">v1.2.0</span>
                    <span class="version-date">24 de Octubre, 2025</span>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-feature">Nueva Funci√≥n</span>
                        <span>Sistema de Notificaciones por Correo</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üìß</div>
                            <div class="change-text">
                                <strong>Sistema de notificaciones autom√°ticas por correo electr√≥nico</strong>
                                <p class="change-description">
                                    Ahora los clientes reciben correos autom√°ticos en momentos importantes:
                                    <br>‚Ä¢ Cuando env√≠an una solicitud de cr√©dito
                                    <br>‚Ä¢ Cuando cambia el estado de su solicitud (en revisi√≥n, aprobada, rechazada, etc.)
                                    <br>‚Ä¢ Cuando sus documentos son revisados (aprobados o rechazados)
                                    <br><br>
                                    Los correos tienen el dise√±o y colores de Autos TREFA, y incluyen un link directo para que el cliente entre a su portal y vea m√°s detalles.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-fix">Correcci√≥n</span>
                        <span>Navegaci√≥n y Rutas</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üîó</div>
                            <div class="change-text">
                                <strong>Reorganizaci√≥n del men√∫ de navegaci√≥n del CRM</strong>
                                <p class="change-description">
                                    El CRM (sistema de gesti√≥n de clientes) ahora est√° organizado dentro del men√∫ de administraci√≥n. Se actualizaron todos los enlaces y permisos para que funcione correctamente en su nueva ubicaci√≥n.
                                </p>
                            </div>
                        </li>
                        <li class="change-item">
                            <div class="change-icon">‚Ü©Ô∏è</div>
                            <div class="change-text">
                                <strong>Ajuste en inicio de sesi√≥n con Google</strong>
                                <p class="change-description">
                                    Cuando inicias sesi√≥n con tu cuenta de Google, ahora te lleva directo a tu escritorio en lugar de mostrar una p√°gina intermedia.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="footer">
            <p>Documentado por el equipo de Autos TREFA</p>
            <p style="margin-top: 10px; font-size: 0.85em;">
                √öltima actualizaci√≥n: 25 de Octubre, 2025 - Historial Completo Agregado
            </p>
        </div>
    </div>
</body>
</html>
