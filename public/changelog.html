<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro de Cambios - Trefa Autos</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Be Vietnam Pro', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #0B2540 0%, #1a3a5c 100%);
            color: #333;
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #FF6801 0%, #ff8533 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.95;
        }

        .content {
            padding: 40px;
        }

        .version {
            margin-bottom: 50px;
            border-left: 4px solid #FF6801;
            padding-left: 30px;
        }

        .version-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .version-number {
            font-size: 1.8em;
            font-weight: 700;
            color: #0B2540;
        }

        .version-date {
            background: #f5f5f5;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            color: #666;
        }

        .change-category {
            margin-bottom: 25px;
        }

        .category-title {
            font-size: 1.2em;
            font-weight: 600;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.75em;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .badge-fix {
            background: #d4edda;
            color: #155724;
        }

        .badge-feature {
            background: #d1ecf1;
            color: #0c5460;
        }

        .badge-improvement {
            background: #fff3cd;
            color: #856404;
        }

        .badge-pending {
            background: #f8d7da;
            color: #721c24;
        }

        .change-list {
            list-style: none;
            margin-left: 0;
        }

        .change-item {
            padding: 12px 0;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }

        .change-item:last-child {
            border-bottom: none;
        }

        .change-icon {
            flex-shrink: 0;
            width: 24px;
            height: 24px;
            background: transparent;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color:#FF6801;
            border: 2px solid #FF6801;
            border-color: #FF6801;
            font-size: 0.8em;
            margin-top: 2px;
        }

        .change-text {
            flex: 1;
        }

        .change-description {
            color: #666;
            font-size: 0.95em;
            margin-top: 5px;
        }

        .commit-hash {
            font-family: 'Courier New', monospace;
            background: #f5f5f5;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.85em;
            color: #666;
            margin-left: 8px;
        }

        .footer {
            background: #f8f9fa;
            padding: 30px 40px;
            text-align: center;
            color: #666;
            font-size: 0.9em;
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            .header h1 {
                font-size: 1.8em;
            }

            .content {
                padding: 25px;
            }

            .version {
                padding-left: 20px;
            }

            .version-header {
                flex-direction: column;
                align-items: flex-start;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìù Registro de Cambios</h1>
            <p>Autos TREFA - Historial de Actualizaciones</p>
            <p style="font-size: 0.9em; margin-top: 5px; opacity: 0.9;">trefa.mx</p>
        </div>

        <div class="content">
            <!-- Version Actual -->
            <div class="version">
                <div class="version-header">
                    <span class="version-number">v1.3.0</span>
                    <span class="version-date">25 de Octubre, 2025</span>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-fix">Correcci√≥n</span>
                        <span>Autenticaci√≥n con Intelimotor</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üîê</div>
                            <div class="change-text">
                                <strong>Corregido error 401 al obtener valuaciones de autos</strong>
                                <span class="commit-hash">1b6bfbd</span>
                                <p class="change-description">
                                    Se solucion√≥ el error "Error de autenticaci√≥n con Intelimotor (401)" que imped√≠a obtener valuaciones de veh√≠culos. La API de Intelimotor requiere que las credenciales (API Key y API Secret) se env√≠en como par√°metros en la URL, no como headers. El proxy ahora extrae las credenciales de los headers y las agrega correctamente a la URL como query parameters (?apiKey=...&apiSecret=...).
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-improvement">Mejora</span>
                        <span>Estandarizaci√≥n de Filtros y Categor√≠as</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üè∑Ô∏è</div>
                            <div class="change-text">
                                <strong>Estandarizados nombres de campos de filtros</strong>
                                <span class="commit-hash">221fdf6</span>
                                <p class="change-description">
                                    Se uniformaron los nombres de los campos de filtros para mejorar la consistencia: 'marcas' ‚Üí 'marca', 'promotion' ‚Üí 'promociones', 'ano' ‚Üí 'autoano'. Tambi√©n se actualizaron las im√°genes de categor√≠as: 'sed√°n' ‚Üí 'sedan' (sin acento), se agreg√≥ imagen de Ducati para motos, y se reemplaz√≥ motos-filter.png con motocicleta-filter.png.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-improvement">Mejora</span>
                        <span>Infraestructura y Rendimiento</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">‚ö°</div>
                            <div class="change-text">
                                <strong>Incrementados recursos de Cloud Run para mejor rendimiento</strong>
                                <span class="commit-hash">37c9b65</span>
                                <p class="change-description">
                                    Se aumentaron los recursos del servidor en producci√≥n: memoria de 512Mi ‚Üí 2Gi (4x m√°s memoria) y CPU de 1 ‚Üí 4 cores. Esto mejora significativamente la velocidad de carga de p√°ginas, procesamiento de im√°genes, y capacidad para manejar m√∫ltiples usuarios simult√°neos.
                                </p>
                            </div>
                        </li>
                        <li class="change-item">
                            <div class="change-icon">üè∑Ô∏è</div>
                            <div class="change-text">
                                <strong>Mejorado el display de versi√≥n en el footer</strong>
                                <span class="commit-hash">37c9b65</span>
                                <p class="change-description">
                                    El footer ahora muestra el hash del commit de Git en lugar de "versi√≥n dev", facilitando el rastreo de cu√°l versi√≥n exacta del c√≥digo est√° desplegada en producci√≥n. Ejemplo: "v1.3.0 ‚Ä¢ 1b6bfbd".
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-fix">Correcci√≥n</span>
                        <span>Creaci√≥n de Usuarios</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üë§</div>
                            <div class="change-text">
                                <strong>Corregido error "Database error saving new user" al registrarse</strong>
                                <span class="commit-hash">SQL fix</span>
                                <p class="change-description">
                                    Se simplific√≥ el trigger de creaci√≥n de perfiles de usuario (handle_new_user) para prevenir errores al crear nuevas cuentas. La funci√≥n ahora solo inserta los campos esenciales (id, email, role) y evita fallos al intentar procesar campos opcionales. Los usuarios ya pueden registrarse sin problemas.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-improvement">Mejora</span>
                        <span>Formulario de Solicitud de Cr√©dito</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üìù</div>
                            <div class="change-text">
                                <strong>Simplificado flujo de solicitud - campos de direcci√≥n ahora opcionales</strong>
                                <span class="commit-hash">0ccd25e</span>
                                <p class="change-description">
                                    El formulario de solicitud de cr√©dito ya no requiere que llenes los campos de direcci√≥n (calle, colonia, ciudad, estado, c√≥digo postal) para avanzar. Ahora solo se requieren 3 campos obligatorios: tipo de vivienda, grado de estudios y n√∫mero de dependientes. Esto mejora significativamente la experiencia del usuario y permite completar las solicitudes m√°s r√°pido.
                                </p>
                            </div>
                        </li>
                        <li class="change-item">
                            <div class="change-icon">üîó</div>
                            <div class="change-text">
                                <strong>Agregada ruta /escritorio/solicitudes para acceso directo</strong>
                                <span class="commit-hash">0ccd25e</span>
                                <p class="change-description">
                                    Los enlaces en los correos electr√≥nicos que reciben los clientes ahora funcionan correctamente. Se agreg√≥ la ruta /escritorio/solicitudes que lleva directamente a la p√°gina donde pueden ver todas sus solicitudes de cr√©dito enviadas.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-fix">Correcci√≥n</span>
                        <span>API de CarStudio</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üîß</div>
                            <div class="change-text">
                                <strong>Solucionado problema con la herramienta de edici√≥n de fotos</strong>
                                <span class="commit-hash">a47cf26</span>
                                <span class="commit-hash">0bf995e</span>
                                <p class="change-description">
                                    La integraci√≥n con CarStudio (herramienta para mejorar fotos de autos) ahora funciona correctamente. El sistema mostraba un error de autorizaci√≥n que imped√≠a procesar las im√°genes. Se realizaron dos correcciones: primero se actualiz√≥ el formato de seguridad que CarStudio espera, y segundo se corrigi√≥ la forma en que el sistema se comunica con el servidor de CarStudio para enviar las fotos.
                                </p>
                            </div>
                        </li>
                        <li class="change-item">
                            <div class="change-icon">ü§ñ</div>
                            <div class="change-text">
                                <strong>Mejorado manejo de errores cuando la IA de CarStudio no puede procesar im√°genes</strong>
                                <span class="commit-hash">ce04ae5</span>
                                <p class="change-description">
                                    Ahora el sistema detecta correctamente cuando la inteligencia artificial de CarStudio no puede procesar una imagen (por ejemplo, si la imagen no contiene un veh√≠culo claramente visible, el fondo es muy complejo, o la calidad es muy baja). Antes solo mostraba "Error desconocido", ahora muestra mensajes claros explicando qu√© sali√≥ mal y sugiere c√≥mo resolverlo (usar im√°genes m√°s claras, con fondos simples, mejor calidad, etc.).
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-fix">Correcci√≥n</span>
                        <span>Configuraci√≥n de Airtable</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üîê</div>
                            <div class="change-text">
                                <strong>Restaurados valores de respaldo para configuraci√≥n de Airtable</strong>
                                <span class="commit-hash">ffa319f</span>
                                <span class="commit-hash">09c9d94</span>
                                <p class="change-description">
                                    Se restauraron los valores de respaldo (fallbacks) para la configuraci√≥n de Airtable, garantizando que la herramienta de valuaci√≥n de autos ("Vende tu Auto") funcione correctamente incluso si las variables de entorno no est√°n configuradas durante el build. Esto previene el error "La configuraci√≥n de Airtable est√° incompleta" que aparec√≠a en producci√≥n.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-fix">Correcci√≥n</span>
                        <span>Autenticaci√≥n OTP</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üîê</div>
                            <div class="change-text">
                                <strong>Solucionado error al iniciar sesi√≥n con c√≥digo de 6 d√≠gitos</strong>
                                <span class="commit-hash">d63d85c</span>
                                <p class="change-description">
                                    Los usuarios ya pueden iniciar sesi√≥n correctamente usando el c√≥digo de 6 d√≠gitos que reciben por correo. Anteriormente aparec√≠a el mensaje "C√≥digo inv√°lido o expirado" incluso con c√≥digos v√°lidos. Se corrigi√≥ el proceso de validaci√≥n para que funcione sin problemas.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-fix">Correcci√≥n</span>
                        <span>Visualizaci√≥n de Documentos</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üìÑ</div>
                            <div class="change-text">
                                <strong>Solucionado problema para ver y descargar documentos de clientes</strong>
                                <span class="commit-hash">33cfb5a</span>
                                <p class="change-description">
                                    Ahora puedes ver y descargar correctamente los documentos que los clientes suben (INE, comprobante de domicilio, etc.) desde la p√°gina de Perfil del Cliente. Antes no se pod√≠an abrir y todos mostraban el mismo tama√±o de archivo. Tambi√©n se corrigi√≥ para que muestre el tama√±o real de cada documento.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-pending">Pendiente</span>
                        <span>Actualizaci√≥n de Estado de Solicitudes</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">‚ö†Ô∏è</div>
                            <div class="change-text">
                                <strong>Permisos para cambiar estado de solicitudes de cr√©dito</strong>
                                <p class="change-description">
                                    <strong>Acci√≥n requerida por el equipo de sistemas:</strong> Actualmente los asesores y administradores no pueden cambiar el estado de las solicitudes de cr√©dito desde el perfil del cliente (por ejemplo, cambiar de "En Revisi√≥n" a "Aprobada"). Se necesita actualizar los permisos en la base de datos ejecutando el siguiente c√≥digo:
                                    <br><br>
                                    <code style="display: block; background: #f5f5f5; padding: 15px; border-radius: 8px; font-size: 0.9em; white-space: pre-wrap; margin-top: 10px;">DROP POLICY IF EXISTS "financing_apps_update" ON public.financing_applications;

CREATE POLICY "financing_apps_update" ON public.financing_applications
FOR UPDATE TO authenticated
USING (
  user_id = auth.uid() OR
  get_my_role() IN ('admin', 'sales')
)
WITH CHECK (
  user_id = auth.uid() OR
  get_my_role() IN ('admin', 'sales')
);</code>
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Versi√≥n 1.1.0 -->
            <div class="version">
                <div class="version-header">
                    <span class="version-number">v1.1.0</span>
                    <span class="version-date">23 de Octubre, 2025</span>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-feature">Nueva Funci√≥n</span>
                        <span>Panel de Ventas para Asesores</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üìä</div>
                            <div class="change-text">
                                <strong>Dashboard completo para gestionar clientes asignados</strong>
                                <p class="change-description">
                                    Los asesores de ventas ahora tienen acceso a un panel personalizado en /escritorio/ventas/leads donde pueden ver todos sus clientes asignados. El panel muestra un resumen con estad√≠sticas en tiempo real, incluyendo n√∫mero de clientes, solicitudes pendientes y clientes contactados. Pueden buscar y filtrar clientes, ver sus perfiles completos, gestionar tags y recordatorios, y sincronizar autom√°ticamente con el CRM Kommo. El sistema est√° completamente protegido con permisos de seguridad - cada asesor solo ve sus propios clientes asignados.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-fix">Correcci√≥n</span>
                        <span>Servidor de Procesamiento de autos</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üåê</div>
                            <div class="change-text">
                                <strong>Solucionado error de CORS que bloqueaba la carga de autos</strong>
                                <p class="change-description">
                                    El servidor de procesamiento de autos (rapid-processor) no estaba permitiendo solicitudes desde nuestro dominio de staging. Se agregaron los encabezados CORS correctos y el manejador de preflight, permitiendo que la lista de autos se cargue correctamente en todas las pruebas de staging.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-fix">Correcci√≥n</span>
                        <span>Guardado de Perfil Bancario</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üè¶</div>
                            <div class="change-text">
                                <strong>Solucionado error que imped√≠a guardar el perfil bancario del cliente</strong>
                                <p class="change-description">
                                    El sistema mostraba error "no tiene campo uid" cuando los clientes intentaban guardar su informaci√≥n bancaria. El problema era una funci√≥n de base de datos que buscaba una columna con nombre incorrecto. Se corrigi√≥ la funci√≥n para usar el nombre de columna correcto (user_id), permitiendo que los clientes completen exitosamente su perfilamiento bancario y reciban recomendaciones de instituciones financieras.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-fix">Correcci√≥n</span>
                        <span>Creaci√≥n de Solicitudes de Financiamiento</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üìã</div>
                            <div class="change-text">
                                <strong>Solucionado error 403 que imped√≠a crear nuevas solicitudes de cr√©dito</strong>
                                <p class="change-description">
                                    Los clientes recib√≠an un error "Forbidden" (403) cuando intentaban crear una nueva solicitud de financiamiento. El error ocurr√≠a porque la misma funci√≥n que guardaba el perfil bancario no estaba asignando correctamente el ID del usuario a las nuevas solicitudes. Con la correcci√≥n anterior (user_id), este problema se resolvi√≥ autom√°ticamente, permitiendo que los clientes completen todo su flujo de solicitud de cr√©dito sin interrupciones.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-feature">Nueva Funci√≥n</span>
                        <span>Integraci√≥n con Airtable como Sistema de Respaldo</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üîÑ</div>
                            <div class="change-text">
                                <strong>Sistema robusto de 4 niveles para cargar inventario de autos</strong>
                                <p class="change-description">
                                    Se implement√≥ un sistema de respaldo en cascada para garantizar que el inventario de autos siempre est√° disponible. El sistema intenta cargar desde: (1) smooth-handler, (2) cache de inventario, (3) cache normalizado, y finalmente (4) directamente desde Airtable. Esto significa que incluso si algunos servidores fallan o est√°n lentos, la aplicaci√≥n siempre conseguir√° mostrar los autos desde Airtable como √∫ltimo recurso. El sistema es inteligente y cachea los datos en el navegador para que las cargas posteriores sean m√°s r√°pidas.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-improvement">Mejora</span>
                        <span>Slugs de autos Mejorados</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üîó</div>
                            <div class="change-text">
                                <strong>Los URLs de autos ahora usan n√∫meros de orden m√°s legibles</strong>
                                <p class="change-description">
                                    Antes los autos ten√≠an URLs confusas. Ahora, cuando entras a ver un auto, el URL incluye el n√∫mero de orden del auto (por ejemplo: /autos/honda-civic-id123456) en lugar de IDs t√©cnicos. Esto hace los enlaces m√°s f√°ciles de compartir, m√°s legibles y mejores para SEO. El sistema todav√≠a puede encontrar autos usando m√∫ltiples formas de identificaci√≥n como respaldo.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Versi√≥n 1.0.0 - Lanzamiento Beta -->
            <div class="version">
                <div class="version-header">
                    <span class="version-number">v1.0.0</span>
                    <span class="version-date">15 de Octubre, 2025</span>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-feature">Nueva Funci√≥n</span>
                        <span>Lanzamiento Beta de Portal Digital TREFA</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üöÄ</div>
                            <div class="change-text">
                                <strong>Plataforma completa de compra-venta y financiamiento de autos</strong>
                                <p class="change-description">
                                    Se lanz√≥ la versi√≥n beta del Portal Digital TREFA, una plataforma revolucionaria que permite a los clientes comprar, vender y financiar autos seminuevos 100% en l√≠nea. El proyecto integra 1600+ horas de desarrollo con tecnolog√≠as modernas (React, TypeScript, Supabase, etc.) e integraciones con m√∫ltiples servicios externos (WordPress, Airtable, Intelimotor, Car Studio AI, Google Analytics, etc.).
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-feature">Nueva Funci√≥n</span>
                        <span>Sistema de Autenticaci√≥n Digital</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üîê</div>
                            <div class="change-text">
                                <strong>Inicio de sesi√≥n seguro sin contrase√±a usando c√≥digos OTP por correo</strong>
                                <p class="change-description">
                                    Los usuarios pueden registrarse e iniciar sesi√≥n de forma segura y f√°cil usando un c√≥digo de 6 d√≠gitos enviado a su correo, eliminando la necesidad de recordar contrase√±as. Tambi√©n se soporta autenticaci√≥n con Google y Facebook para acceso r√°pido. El sistema maneja autom√°ticamente la recuperaci√≥n de contrase√±a y preserva la intenci√≥n del usuario (si intentaba financiar un auto espec√≠fico, lo lleva all√≠ despu√©s de registrarse).
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-feature">Nueva Funci√≥n</span>
                        <span>Cat√°logo de autos con Filtros Avanzados</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üöó</div>
                            <div class="change-text">
                                <strong>Exploraci√≥n inteligente del inventario con b√∫squeda y filtros</strong>
                                <p class="change-description">
                                    Los clientes pueden explorar m√°s de 70 autos seminuevos con b√∫squeda avanzada y filtros por marca, modelo, a√±o, rango de precio, cuotas disponibles, promociones y ubicaci√≥n. La p√°gina de detalles del auto muestra galer√≠as de fotos en alta resoluci√≥n, videos, especificaciones t√©cnicas, reporte de inspecci√≥n de 150 puntos, calculadora de financiamiento interactiva, y opciones para compartir o guardar el auto.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-feature">Nueva Funci√≥n</span>
                        <span>Sistema de Favoritos y Comparaci√≥n</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">‚ù§Ô∏è</div>
                            <div class="change-text">
                                <strong>Guardar y comparar autos favoritos en tu perfil</strong>
                                <p class="change-description">
                                    Los usuarios registrados pueden guardar sus autos preferidos en su lista de favoritos, accesible desde su dashboard personal. Esta lista facilita la comparaci√≥n entre m√∫ltiples autos para tomar mejor decisi√≥n de compra.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-feature">Nueva Funci√≥n</span>
                        <span>Herramienta "Vende tu Auto"</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üí∞</div>
                            <div class="change-text">
                                <strong>Valuaci√≥n instant√°nea de autos usando inteligencia artificial</strong>
                                <p class="change-description">
                                    Clientes que quieren vender sus autos pueden usar la herramienta de valuaci√≥n en /quote-car. Simplemente describen su auto en lenguaje natural, el sistema lo identifica y proporciona una oferta de compra competitiva en segundos usando la API profesional de Intelimotor¬Æ. Si aceptan la oferta, pueden agendar una inspecci√≥n directamente por WhatsApp.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-feature">Nueva Funci√≥n</span>
                        <span>Solicitud de Financiamiento Digital Multietapa</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üìù</div>
                            <div class="change-text">
                                <strong>Formulario completo para solicitar financiamiento de autos</strong>
                                <p class="change-description">
                                    Usuarios registrados pueden completar una solicitud de financiamiento completa en la p√°gina /aplicacion. El formulario est√° pre-llenado con la informaci√≥n del perfil, puede auto-seleccionar el auto si vienes desde una p√°gina espec√≠fica, permite cargar documentos requeridos (INE, comprobante de domicilio, etc.) con una interfaz intuitiva de arrastrar-soltar, y guarda la solicitud de forma segura en la base de datos. Los clientes ven confirmaci√≥n de env√≠o y pueden hacer seguimiento del estado de su solicitud.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-feature">Nueva Funci√≥n</span>
                        <span>Perfilamiento Bancario Inteligente</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üè¶</div>
                            <div class="change-text">
                                <strong>Cuestionario que determina qu√© banco tiene m√°s probabilidades de aprobar tu cr√©dito</strong>
                                <p class="change-description">
                                    En la p√°gina /perfilacion-bancaria, el sistema hace preguntas inteligentes sobre la situaci√≥n financiera del cliente para determinar cu√°les instituciones bancarias tienen m√°s probabilidades de aprobar su solicitud de cr√©dito. El sistema usa esta informaci√≥n para optimizar recomendaciones bancarias posteriores, aumentando significativamente la tasa de aprobaci√≥n.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-feature">Nueva Funci√≥n</span>
                        <span>Dashboard de Usuario Personalizado</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üìà</div>
                            <div class="change-text">
                                <strong>Panel de control central para usuarios registrados</strong>
                                <p class="change-description">
                                    El dashboard en /escritorio es el centro de control para usuarios. Aqu√≠ ven un resumen de sus solicitudes activas, proyecciones financieras basadas en su perfil, recomendaciones personalizadas de autos que se ajustan a su presupuesto, y un sistema de gu√≠a que los dirige a completar los pasos necesarios (perfil ‚Üí perfilamiento ‚Üí solicitud) para poder aplicar a financiamiento.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-feature">Nueva Funci√≥n</span>
                        <span>Gesti√≥n de Perfil de Usuario</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üë§</div>
                            <div class="change-text">
                                <strong>P√°gina para actualizar informaci√≥n personal, fiscal y de contacto</strong>
                                <p class="change-description">
                                    En /profile, usuarios pueden actualizar su informaci√≥n personal, direcci√≥n, datos fiscales (nombre, apellido, RFC, CURP), tel√©fono y correo. El sistema calcula autom√°ticamente su RFC en tiempo real mientras escriben, proporcionando feedback inmediato y asegurando que los datos sean correctos antes de guardarlos.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-feature">Nueva Funci√≥n</span>
                        <span>Centro de Marketing para Administradores</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üõ†Ô∏è</div>
                            <div class="change-text">
                                <strong>Panel todo-en-uno para gestionar marketing digital y campa√±as</strong>
                                <p class="change-description">
                                    Los administradores acceden a /marketing para un control centralizado de todas las herramientas de marketing. Pueden habilitar/deshabilitar integraciones (Google Analytics, GTM, Facebook Pixel, etc.), crear eventos de seguimiento personalizados visualmente (sin escribir c√≥digo), generar URLs de campa√±a con UTMs autom√°ticamente, usar un generador de contenido con IA para crear art√≠culos y copys, depurar la API de Car Studio directamente, y ver anal√≠ticas simuladas de sesiones de usuarios.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-feature">Nueva Funci√≥n</span>
                        <span>Mejora de Fotos con Inteligencia Artificial</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üì∏</div>
                            <div class="change-text">
                                <strong>Integraci√≥n con Car Studio AI para procesar y mejorar fotos de autos</strong>
                                <p class="change-description">
                                    El sistema se conecta a la API de Car Studio para mejorar autom√°ticamente las fotos de autos con fondos de calidad profesional y mejor procesamiento de imagen. Las im√°genes procesadas se guardan tanto en el registro del auto como en un respaldo seguro en Supabase Storage para garantizar que nunca se pierdan.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-feature">Nueva Funci√≥n</span>
                        <span>P√°gina de Promociones</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üè∑Ô∏è</div>
                            <div class="change-text">
                                <strong>Secci√≥n dedicada a mostrar autos con ofertas especiales</strong>
                                <p class="change-description">
                                    En /promociones, los clientes ven todos los autos que actualmente tienen ofertas especiales o bonificaciones (descuentos, tasas preferenciales, etc.) con banners visuales destacados para cada promoci√≥n activa.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-feature">Nueva Funci√≥n</span>
                        <span>P√°gina de Preguntas Frecuentes</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">‚ùì</div>
                            <div class="change-text">
                                <strong>Secci√≥n de ayuda completa y categorizada</strong>
                                <p class="change-description">
                                    En /faq, los usuarios pueden encontrar respuestas a preguntas frecuentes sobre financiamiento, vender su auto, requisitos de documentos, etc. Las preguntas est√°n organizadas por categor√≠as con acordeones interactivos para f√°cil navegaci√≥n.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-feature">Nueva Funci√≥n</span>
                        <span>Landing Pages de Prueba A/B/C</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üé®</div>
                            <div class="change-text">
                                <strong>M√∫ltiples versiones de p√°gina de inicio para optimizar conversiones</strong>
                                <p class="change-description">
                                    El sistema incluye varias landing pages (/landing-b, /landing-c) con dise√±os diferentes para probar cu√°l versi√≥n convierte mejor. Todas incluyen sliders din√°micos de autos, secciones de captura de leads, narrativa de marca, garant√≠as y testimonios de clientes reales.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-feature">Nueva Funci√≥n</span>
                        <span>Integraci√≥n con CRM Kommo</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üîó</div>
                            <div class="change-text">
                                <strong>Sincronizaci√≥n autom√°tica de datos de clientes con sistema de CRM</strong>
                                <p class="change-description">
                                    Los datos de nuevas solicitudes y clientes se sincronizan autom√°ticamente con el CRM Kommo para que el equipo de ventas tenga informaci√≥n actualizada en tiempo real. Esto garantiza que no se pierda ning√∫n lead y facilita el seguimiento del embudo de ventas.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-fix">Correcci√≥n</span>
                        <span>Correcciones Iniciales de Bugs</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üêõ</div>
                            <div class="change-text">
                                <strong>Correcci√≥n del crash de la p√°gina de listado de autos</strong>
                                <p class="change-description">
                                    Se arregl√≥ un error que hac√≠a que la p√°gina de autos se fuera en blanco despu√©s de cargar. El problema era que los filtros no estaban calculados correctamente cuando el HTML se renderizaba. Se implementaron optimizaciones con React useMemo para calcular correctamente todos los conteos de filtros (marcas, a√±os, ubicaciones, clasificaciones) basados en los autos disponibles.
                                </p>
                            </div>
                        </li>
                        <li class="change-item">
                            <div class="change-icon">üîÑ</div>
                            <div class="change-text">
                                <strong>Solucionado bucle infinito de creaci√≥n de perfiles</strong>
                                <p class="change-description">
                                    El sistema estaba intentando crear perfiles de usuario indefinidamente cuando los usuarios se registraban, llenando la consola con errores. Se removi√≥ la l√≥gica de creaci√≥n de perfil desde el navegador y se implement√≥ una soluci√≥n con triggers de base de datos que crean perfiles autom√°ticamente cuando un usuario se registra, de forma m√°s eficiente y segura.
                                </p>
                            </div>
                        </li>
                        <li class="change-item">
                            <div class="change-icon">üñºÔ∏è</div>
                            <div class="change-text">
                                <strong>Correcci√≥n de normalizaci√≥n de im√°genes de autos</strong>
                                <p class="change-description">
                                    Las fotos de autos no se mostraban correctamente en el carrusel de la p√°gina de inicio y en las tarjetas del listado. Se arregl√≥ el c√≥digo que procesa las im√°genes para manejar correctamente diferentes formatos (texto, arrays de URLs, objetos de attachment) que vienen de diferentes fuentes de datos.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Versiones Anteriores -->
            <div class="version">
                <div class="version-header">
                    <span class="version-number">v1.2.0</span>
                    <span class="version-date">24 de Octubre, 2025</span>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-feature">Nueva Funci√≥n</span>
                        <span>Sistema de Notificaciones por Correo</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üìß</div>
                            <div class="change-text">
                                <strong>Sistema de notificaciones autom√°ticas por correo electr√≥nico</strong>
                                <p class="change-description">
                                    Ahora los clientes reciben correos autom√°ticos en momentos importantes:
                                    <br>‚Ä¢ Cuando env√≠an una solicitud de cr√©dito
                                    <br>‚Ä¢ Cuando cambia el estado de su solicitud (en revisi√≥n, aprobada, rechazada, etc.)
                                    <br>‚Ä¢ Cuando sus documentos son revisados (aprobados o rechazados)
                                    <br><br>
                                    Los correos tienen el dise√±o y colores de Autos TREFA, y incluyen un link directo para que el cliente entre a su portal y vea m√°s detalles.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-fix">Correcci√≥n</span>
                        <span>Navegaci√≥n y Rutas</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üîó</div>
                            <div class="change-text">
                                <strong>Reorganizaci√≥n del men√∫ de navegaci√≥n del CRM</strong>
                                <p class="change-description">
                                    El CRM (sistema de gesti√≥n de clientes) ahora est√° organizado dentro del men√∫ de administraci√≥n. Se actualizaron todos los enlaces y permisos para que funcione correctamente en su nueva ubicaci√≥n.
                                </p>
                            </div>
                        </li>
                        <li class="change-item">
                            <div class="change-icon">‚Ü©Ô∏è</div>
                            <div class="change-text">
                                <strong>Ajuste en inicio de sesi√≥n con Google</strong>
                                <p class="change-description">
                                    Cuando inicias sesi√≥n con tu cuenta de Google, ahora te lleva directo a tu escritorio en lugar de mostrar una p√°gina intermedia.
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Platform Features & Architecture Overview -->
            <div class="version" style="background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); border-left: 4px solid #0B2540; margin-top: 60px;">
                <div class="version-header">
                    <span class="version-number" style="color: #0B2540;">üèóÔ∏è Arquitectura de la Plataforma</span>
                </div>
                <p style="margin-bottom: 30px; color: #666; font-size: 1.05em; line-height: 1.8;">
                    La plataforma TREFA es una aplicaci√≥n web empresarial de √∫ltima generaci√≥n construida con tecnolog√≠as modernas y arquitectura serverless. A continuaci√≥n se detallan las capacidades t√©cnicas y caracter√≠sticas principales que hacen de esta aplicaci√≥n una soluci√≥n robusta y escalable.
                </p>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-feature">Infraestructura</span>
                        <span>Sincronizaci√≥n Autom√°tica Airtable ‚Üí Supabase</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üîÑ</div>
                            <div class="change-text">
                                <strong>Sistema de cach√© inteligente con sincronizaci√≥n bidireccional</strong>
                                <p class="change-description">
                                    La plataforma utiliza <strong>Airtable</strong> como sistema de gesti√≥n de inventario (source of truth) y <strong>Supabase PostgreSQL</strong> como base de datos de cach√© de alta velocidad. Un sistema automatizado sincroniza los veh√≠culos desde Airtable hacia Supabase cada hora mediante webhooks y Supabase Edge Functions. Esto permite:<br><br>
                                    ‚Ä¢ <strong>Consultas ultra r√°pidas:</strong> El frontend consulta Supabase en lugar de Airtable, reduciendo tiempos de carga de ~3s a ~300ms<br>
                                    ‚Ä¢ <strong>Sincronizaci√≥n en tiempo real:</strong> Webhooks de Airtable notifican cambios instant√°neamente a la plataforma<br>
                                    ‚Ä¢ <strong>Cach√© autom√°tico:</strong> La tabla `inventario_cache` se actualiza autom√°ticamente con todos los campos relevantes<br>
                                    ‚Ä¢ <strong>Resilencia:</strong> Si Airtable est√° ca√≠do, el sitio web contin√∫a funcionando con datos en cach√©<br>
                                    ‚Ä¢ <strong>Edge Function `sync-inventory`:</strong> Procesa webhooks de Airtable y actualiza PostgreSQL de forma eficiente
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-feature">Infraestructura</span>
                        <span>Almacenamiento de Im√°genes en Cloudflare R2</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">‚òÅÔ∏è</div>
                            <div class="change-text">
                                <strong>CDN global con cero costos de egreso y procesamiento autom√°tico</strong>
                                <p class="change-description">
                                    Todas las im√°genes de veh√≠culos, documentos de clientes y assets del sitio se almacenan en <strong>Cloudflare R2</strong>, ofreciendo:<br><br>
                                    ‚Ä¢ <strong>Distribuci√≥n global v√≠a CDN:</strong> Las im√°genes se sirven desde el edge m√°s cercano al usuario (latencias <50ms)<br>
                                    ‚Ä¢ <strong>Cero costos de egreso:</strong> A diferencia de S3, R2 no cobra por transferencia de datos salientes<br>
                                    ‚Ä¢ <strong>URLs firmadas temporales:</strong> Para documentos privados (INE, comprobantes), se generan URLs que expiran en 1 hora<br>
                                    ‚Ä¢ <strong>Procesamiento autom√°tico:</strong> Edge Function `r2-upload` maneja uploads desde el cliente con validaci√≥n de tipos<br>
                                    ‚Ä¢ <strong>Optimizaci√≥n de im√°genes:</strong> Soporte para transformaciones autom√°ticas (resize, webp, compresi√≥n)<br>
                                    ‚Ä¢ <strong>Buckets organizados:</strong> `trefa-images` (p√∫blicas), `trefa-documents` (privadas con auth)<br>
                                    ‚Ä¢ <strong>Backup autom√°tico:</strong> Configurado para retener versiones de archivos por 30 d√≠as
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-feature">Infraestructura</span>
                        <span>Supabase Edge Functions</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">‚ö°</div>
                            <div class="change-text">
                                <strong>Funciones serverless en Deno desplegadas globalmente</strong>
                                <p class="change-description">
                                    La plataforma utiliza <strong>Supabase Edge Functions</strong> (powered by Deno) para l√≥gica del lado del servidor sin gesti√≥n de infraestructura:<br><br>

                                    <strong>üì¶ sync-inventory:</strong> Sincroniza veh√≠culos desde Airtable a PostgreSQL<br>
                                    ‚Ä¢ Procesa webhooks de Airtable con validaci√≥n de firma<br>
                                    ‚Ä¢ Upserts (insert or update) masivos eficientes<br>
                                    ‚Ä¢ Normalizaci√≥n de datos (im√°genes, precios, campos custom)<br>
                                    ‚Ä¢ Logs estructurados para debugging<br><br>

                                    <strong>üì§ r2-upload:</strong> Maneja uploads directos a Cloudflare R2<br>
                                    ‚Ä¢ Validaci√≥n de tipos MIME y tama√±os de archivo<br>
                                    ‚Ä¢ Generaci√≥n de nombres √∫nicos con timestamps<br>
                                    ‚Ä¢ Organizaci√≥n autom√°tica en carpetas por tipo<br>
                                    ‚Ä¢ Retorna URLs p√∫blicas para el frontend<br><br>

                                    <strong>üîß carstudio-proxy:</strong> Proxy seguro para API de CarStudio<br>
                                    ‚Ä¢ Oculta credenciales de CarStudio del cliente<br>
                                    ‚Ä¢ Manejo de CORS para requests cross-origin<br>
                                    ‚Ä¢ Logging de requests para auditor√≠a<br><br>

                                    <strong>üåâ intelimotor-proxy:</strong> Proxy para API de valuaci√≥n Intelimotor<br>
                                    ‚Ä¢ Inyecci√≥n de credenciales como query parameters<br>
                                    ‚Ä¢ Conversi√≥n de formato de requests<br>
                                    ‚Ä¢ Manejo robusto de errores de API<br><br>

                                    <strong>üìß send-email:</strong> Servicio de env√≠o de emails transaccionales<br>
                                    ‚Ä¢ Integraci√≥n con Brevo (SendinBlue) para env√≠os<br>
                                    ‚Ä¢ Templates HTML personalizables<br>
                                    ‚Ä¢ Tracking de aperturas y clicks
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-feature">Automatizaci√≥n</span>
                        <span>Sistema de Emails Automatizados (Brevo)</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üìß</div>
                            <div class="change-text">
                                <strong>Flujos de comunicaci√≥n automatizados con seguimiento completo</strong>
                                <p class="change-description">
                                    Integraci√≥n completa con <strong>Brevo (SendinBlue)</strong> para comunicaci√≥n automatizada y personalizada:<br><br>

                                    <strong>Emails Transaccionales:</strong><br>
                                    ‚Ä¢ <strong>Confirmaci√≥n de solicitud de cr√©dito:</strong> Email inmediato cuando el usuario completa la solicitud con resumen de datos y pr√≥ximos pasos<br>
                                    ‚Ä¢ <strong>Confirmaci√≥n de valuaci√≥n:</strong> Despu√©s de que el usuario solicita valuar su auto, recibe email con detalles del veh√≠culo y oferta estimada<br>
                                    ‚Ä¢ <strong>Recordatorio de documentos:</strong> Si falta documentaci√≥n, se env√≠a recordatorio con links para completar el perfil<br>
                                    ‚Ä¢ <strong>Actualizaci√≥n de estatus:</strong> Notificaciones cuando una solicitud cambia de estado (En Revisi√≥n ‚Üí Aprobada ‚Üí Rechazada)<br>
                                    ‚Ä¢ <strong>C√≥digos OTP de autenticaci√≥n:</strong> Para login sin contrase√±a con c√≥digos de 6 d√≠gitos<br><br>

                                    <strong>Campa√±as de Marketing:</strong><br>
                                    ‚Ä¢ <strong>Bienvenida a nuevos usuarios:</strong> Serie de 3 emails educativos sobre c√≥mo usar la plataforma<br>
                                    ‚Ä¢ <strong>Abandono de solicitud:</strong> Si el usuario empieza pero no completa una solicitud, recibe reminder a las 24h<br>
                                    ‚Ä¢ <strong>Promociones personalizadas:</strong> Basadas en veh√≠culos vistos y favoritos del usuario<br>
                                    ‚Ä¢ <strong>Newsletter mensual:</strong> Con nuevos veh√≠culos, tips de financiamiento y testimonios<br><br>

                                    <strong>Capacidades T√©cnicas:</strong><br>
                                    ‚Ä¢ Templates HTML responsive con dise√±o de marca TREFA<br>
                                    ‚Ä¢ Variables din√°micas (nombre, veh√≠culo, monto, etc.)<br>
                                    ‚Ä¢ Tracking de opens, clicks y conversiones<br>
                                    ‚Ä¢ A/B testing de subject lines y contenido<br>
                                    ‚Ä¢ L√≠mites de rate (300 emails/d√≠a en plan actual)<br>
                                    ‚Ä¢ Listas de contactos segmentadas por inter√©s
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-feature">Caracter√≠sticas</span>
                        <span>Portal de Usuario Completo</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üë§</div>
                            <div class="change-text">
                                <strong>Escritorio personalizado con gesti√≥n completa del ciclo de vida del cliente</strong>
                                <p class="change-description">
                                    Dashboard completo en <strong>/escritorio</strong> donde los usuarios pueden:<br><br>
                                    ‚Ä¢ <strong>Ver solicitudes de cr√©dito:</strong> Historial completo con estatus en tiempo real<br>
                                    ‚Ä¢ <strong>Subir documentos:</strong> INE, comprobante de domicilio, referencias con validaci√≥n de tipo<br>
                                    ‚Ä¢ <strong>Veh√≠culos favoritos:</strong> Lista de autos guardados con alertas de cambios de precio<br>
                                    ‚Ä¢ <strong>Historial de cotizaciones:</strong> Todas las valuaciones de "Vende tu Auto" con ofertas<br>
                                    ‚Ä¢ <strong>Perfil completo:</strong> Edici√≥n de datos personales, preferencias de contacto<br>
                                    ‚Ä¢ <strong>Programar citas:</strong> Integraci√≥n con Calendly para agendarlas en sucursales<br>
                                    ‚Ä¢ <strong>Mensajer√≠a con asesores:</strong> Chat en tiempo real con el equipo de ventas
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-feature">Caracter√≠sticas</span>
                        <span>Sistema de Valuaci√≥n Autom√°tica con IA</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üí∞</div>
                            <div class="change-text">
                                <strong>Integraci√≥n con Intelimotor para valuaciones de mercado en tiempo real</strong>
                                <p class="change-description">
                                    La funci√≥n "Vende tu Auto" permite a los usuarios obtener una oferta instant√°nea:<br><br>
                                    ‚Ä¢ <strong>B√∫squeda inteligente:</strong> Autocomplete con toda la base de datos de veh√≠culos en M√©xico<br>
                                    ‚Ä¢ <strong>M√∫ltiples versiones:</strong> El sistema sugiere variantes del mismo modelo/a√±o para comparar<br>
                                    ‚Ä¢ <strong>Valuaci√≥n de mercado:</strong> Usa datos de Intelimotor (precio alto/bajo/promedio, d√≠as en inventario)<br>
                                    ‚Ä¢ <strong>Ofertas hist√≥ricas de TREFA:</strong> Muestra cu√°nto se ha pagado por veh√≠culos similares<br>
                                    ‚Ä¢ <strong>Captura de leads:</strong> Almacena inter√©s en Airtable para seguimiento del equipo<br>
                                    ‚Ä¢ <strong>Webhooks a CRM:</strong> Notificaci√≥n inmediata al equipo de compras
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-feature">Caracter√≠sticas</span>
                        <span>Procesamiento de Im√°genes con IA (CarStudio)</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üé®</div>
                            <div class="change-text">
                                <strong>Mejora autom√°tica de fotos de veh√≠culos usando inteligencia artificial</strong>
                                <p class="change-description">
                                    Panel de administraci√≥n en <strong>/escritorio/car-studio</strong> para procesar im√°genes:<br><br>
                                    ‚Ä¢ <strong>Eliminaci√≥n de fondo:</strong> IA detecta y remueve el fondo de la foto del veh√≠culo<br>
                                    ‚Ä¢ <strong>Reemplazo de fondo:</strong> Aplica fondos profesionales (showroom, naturaleza, ciudad)<br>
                                    ‚Ä¢ <strong>Correcci√≥n de iluminaci√≥n:</strong> Ajustes autom√°ticos de brillo, contraste y saturaci√≥n<br>
                                    ‚Ä¢ <strong>Batch processing:</strong> Procesa m√∫ltiples im√°genes simult√°neamente<br>
                                    ‚Ä¢ <strong>Validaci√≥n de calidad:</strong> Detecta si la imagen tiene veh√≠culo visible, calidad suficiente<br>
                                    ‚Ä¢ <strong>Actualizaci√≥n autom√°tica:</strong> Las im√°genes procesadas se suben a R2 y actualizan Airtable
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-feature">Caracter√≠sticas</span>
                        <span>Filtrado Avanzado y B√∫squeda</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üîç</div>
                            <div class="change-text">
                                <strong>Sistema de filtros multidimensional con conteos din√°micos</strong>
                                <p class="change-description">
                                    La p√°gina de exploraci√≥n de veh√≠culos incluye:<br><br>
                                    ‚Ä¢ <strong>Filtros por m√∫ltiples dimensiones:</strong> Marca, a√±o, precio, enganche, mensualidad, carrocer√≠a, transmisi√≥n, ubicaci√≥n, garant√≠a, promociones<br>
                                    ‚Ä¢ <strong>Contadores din√°micos:</strong> Cada opci√≥n de filtro muestra cu√°ntos veh√≠culos coinciden<br>
                                    ‚Ä¢ <strong>B√∫squeda de texto libre:</strong> Busca en marca, modelo, caracter√≠sticas<br>
                                    ‚Ä¢ <strong>Rangos de precio/enganche:</strong> Sliders interactivos con valores min/max<br>
                                    ‚Ä¢ <strong>Toggle "Ocultar separados":</strong> Esconde veh√≠culos ya apartados<br>
                                    ‚Ä¢ <strong>Ordenamiento:</strong> Por precio (asc/desc), a√±o m√°s nuevo, favoritos primero<br>
                                    ‚Ä¢ <strong>Persistencia de filtros:</strong> Los filtros se guardan en URL para compartir b√∫squedas<br>
                                    ‚Ä¢ <strong>Vista grid/lista:</strong> Cambio entre card view y list view
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-feature">Caracter√≠sticas</span>
                        <span>Solicitud de Financiamiento Digital</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üìÑ</div>
                            <div class="change-text">
                                <strong>Formulario multi-paso con validaci√≥n y seguimiento completo</strong>
                                <p class="change-description">
                                    Flujo completo de solicitud de cr√©dito automotriz:<br><br>
                                    ‚Ä¢ <strong>4 pasos de captura:</strong> Datos personales ‚Üí Domicilio ‚Üí Informaci√≥n laboral ‚Üí Referencias<br>
                                    ‚Ä¢ <strong>Validaci√≥n en tiempo real:</strong> Usando React Hook Form + Zod schemas<br>
                                    ‚Ä¢ <strong>Autocompletado inteligente:</strong> Si el usuario tiene perfil, pre-llena campos<br>
                                    ‚Ä¢ <strong>Upload de documentos:</strong> Durante o despu√©s de la solicitud<br>
                                    ‚Ä¢ <strong>Integraci√≥n con bancos:</strong> Env√≠o autom√°tico de solicitudes a instituciones financieras<br>
                                    ‚Ä¢ <strong>Tracking de estatus:</strong> En Revisi√≥n ‚Üí Aprobada ‚Üí Documentaci√≥n ‚Üí Entrega<br>
                                    ‚Ä¢ <strong>Notificaciones autom√°ticas:</strong> Emails en cada cambio de estatus<br>
                                    ‚Ä¢ <strong>Versi√≥n imprimible:</strong> PDF generado con todos los datos para firmas f√≠sicas
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-feature">Tecnolog√≠a</span>
                        <span>Stack Tecnol√≥gico Moderno</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">‚öôÔ∏è</div>
                            <div class="change-text">
                                <strong>Frontend, Backend y DevOps de vanguardia</strong>
                                <p class="change-description">
                                    <strong>Frontend:</strong><br>
                                    ‚Ä¢ React 18 + TypeScript para type safety<br>
                                    ‚Ä¢ Vite para builds ultra r√°pidos (<5s en producci√≥n)<br>
                                    ‚Ä¢ TailwindCSS para estilos consistentes y responsive<br>
                                    ‚Ä¢ Framer Motion para animaciones fluidas<br>
                                    ‚Ä¢ React Router v6 para navegaci√≥n SPA<br>
                                    ‚Ä¢ React Hook Form + Zod para validaci√≥n de formularios<br><br>

                                    <strong>Backend & Base de Datos:</strong><br>
                                    ‚Ä¢ Supabase (PostgreSQL + Auth + Storage + Edge Functions)<br>
                                    ‚Ä¢ Row Level Security (RLS) para seguridad a nivel de fila<br>
                                    ‚Ä¢ Triggers y funciones de PostgreSQL para l√≥gica compleja<br>
                                    ‚Ä¢ Airtable como CMS y sistema de gesti√≥n de inventario<br>
                                    ‚Ä¢ Node.js + Express para server-side rendering<br><br>

                                    <strong>Almacenamiento & CDN:</strong><br>
                                    ‚Ä¢ Cloudflare R2 para im√°genes y documentos<br>
                                    ‚Ä¢ Cloudflare CDN para distribuci√≥n global<br>
                                    ‚Ä¢ Cloudflare Workers para edge computing (futuro)<br><br>

                                    <strong>DevOps & Infraestructura:</strong><br>
                                    ‚Ä¢ Google Cloud Run para deployment serverless<br>
                                    ‚Ä¢ Docker para containerizaci√≥n<br>
                                    ‚Ä¢ GitHub Actions para CI/CD automatizado<br>
                                    ‚Ä¢ Artifact Registry para almacenamiento de im√°genes<br>
                                    ‚Ä¢ 2Gi RAM + 4 CPU cores para alto rendimiento<br><br>

                                    <strong>Integraciones:</strong><br>
                                    ‚Ä¢ Brevo (SendinBlue) para email marketing<br>
                                    ‚Ä¢ Intelimotor para valuaciones de mercado<br>
                                    ‚Ä¢ CarStudio AI para procesamiento de im√°genes<br>
                                    ‚Ä¢ Kommo CRM para gesti√≥n de leads<br>
                                    ‚Ä¢ Calendly para agendamiento de citas<br>
                                    ‚Ä¢ LeadConnector para webhooks de conversi√≥n
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-feature">Seguridad</span>
                        <span>Protecci√≥n Multi-Capa</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üîí</div>
                            <div class="change-text">
                                <strong>Seguridad empresarial en todas las capas</strong>
                                <p class="change-description">
                                    ‚Ä¢ <strong>Autenticaci√≥n OTP:</strong> Login sin contrase√±a con c√≥digos de 6 d√≠gitos por email<br>
                                    ‚Ä¢ <strong>Row Level Security (RLS):</strong> Pol√≠ticas de PostgreSQL garantizan que usuarios solo vean sus datos<br>
                                    ‚Ä¢ <strong>JWT tokens:</strong> Autenticaci√≥n stateless con Supabase Auth<br>
                                    ‚Ä¢ <strong>HTTPS everywhere:</strong> Todos los requests sobre TLS 1.3<br>
                                    ‚Ä¢ <strong>CORS configurado:</strong> Solo dominios autorizados pueden hacer requests<br>
                                    ‚Ä¢ <strong>Rate limiting:</strong> Protecci√≥n contra ataques de fuerza bruta<br>
                                    ‚Ä¢ <strong>SQL injection prevention:</strong> Todas las queries usan prepared statements<br>
                                    ‚Ä¢ <strong>XSS protection:</strong> Sanitizaci√≥n de inputs y Content Security Policy<br>
                                    ‚Ä¢ <strong>Secrets management:</strong> Credenciales en variables de entorno, nunca en c√≥digo
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-feature">Performance</span>
                        <span>Optimizaciones de Rendimiento</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">‚ö°</div>
                            <div class="change-text">
                                <strong>Experiencia ultra r√°pida en todos los dispositivos</strong>
                                <p class="change-description">
                                    ‚Ä¢ <strong>Lazy loading:</strong> Componentes y rutas cargados solo cuando se necesitan<br>
                                    ‚Ä¢ <strong>Image optimization:</strong> Formato WebP, compresi√≥n autom√°tica, lazy loading<br>
                                    ‚Ä¢ <strong>Code splitting:</strong> Bundles separados por ruta (chunks de ~50kb)<br>
                                    ‚Ä¢ <strong>React.memo:</strong> Componentes memorizados para evitar re-renders innecesarios<br>
                                    ‚Ä¢ <strong>useMemo/useCallback:</strong> Optimizaci√≥n de c√°lculos y funciones costosas<br>
                                    ‚Ä¢ <strong>PostgreSQL indexes:</strong> Queries optimizados con √≠ndices en campos clave<br>
                                    ‚Ä¢ <strong>CDN caching:</strong> Assets est√°ticos cacheados por 1 a√±o<br>
                                    ‚Ä¢ <strong>Compression:</strong> Gzip/Brotli para reducir tama√±os de transferencia<br>
                                    ‚Ä¢ <strong>Prefetching:</strong> Datos cr√≠ticos pre-cargados en background<br>
                                    ‚Ä¢ <strong>Service Workers:</strong> Cache de assets para funcionalidad offline (futuro)
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="change-category">
                    <div class="category-title">
                        <span class="badge badge-feature">Admin & CRM</span>
                        <span>Panel de Administraci√≥n Completo</span>
                    </div>
                    <ul class="change-list">
                        <li class="change-item">
                            <div class="change-icon">üë®‚Äçüíº</div>
                            <div class="change-text">
                                <strong>Dashboard administrativo con gesti√≥n completa del negocio</strong>
                                <p class="change-description">
                                    Los administradores y asesores tienen acceso a:<br><br>
                                    ‚Ä¢ <strong>Dashboard de ventas:</strong> M√©tricas en tiempo real (leads, conversiones, ingresos)<br>
                                    ‚Ä¢ <strong>Gesti√≥n de solicitudes:</strong> Lista completa con filtros y cambio de estatus<br>
                                    ‚Ä¢ <strong>Perfiles de clientes:</strong> Vista 360¬∞ con historial completo de interacciones<br>
                                    ‚Ä¢ <strong>Gesti√≥n de leads:</strong> Captura desde landing pages con seguimiento<br>
                                    ‚Ä¢ <strong>Configuraci√≥n de Airtable:</strong> Panel para conectar bases de datos<br>
                                    ‚Ä¢ <strong>Procesamiento de im√°genes:</strong> CarStudio para mejorar fotos de inventario<br>
                                    ‚Ä¢ <strong>Analytics integrado:</strong> Gr√°ficas de conversi√≥n, fuentes de tr√°fico, ROI<br>
                                    ‚Ä¢ <strong>Gesti√≥n de usuarios:</strong> Crear/editar perfiles, asignar roles (admin/sales/user)<br>
                                    ‚Ä¢ <strong>Configuraci√≥n de webhooks:</strong> Conectar con sistemas externos<br>
                                    ‚Ä¢ <strong>Logs y auditor√≠a:</strong> Historial de cambios para compliance
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="footer">
            <p>Documentado por el equipo de Autos TREFA</p>
            <p style="margin-top: 10px; font-size: 0.85em;">
                √öltima actualizaci√≥n: 25 de Octubre, 2025 - Arquitectura y Features Documentados
            </p>
        </div>
    </div>
</body>
</html>
